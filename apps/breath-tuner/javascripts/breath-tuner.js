"use strict";function BreathTuner(){function e(){k.css("margin-left",d/2+m-(d+m)*(s+1)+"px")}function t(){var e=new Date-h;e=Math.round(e/100)/10;var t=Math.floor(e);if(t>f&&u>=t){var n=(d+m)*s;if(a)var l=v/2-w/2-(g+x)*t;else var l=v/2+w/2+g+(x+g)*(t-1);T.fillStyle=3>t?y.red:6>t?y.orange:10>t?y.yellow:15>t?y.green:20>t?y.cyan:25>t?y.blue:30>t?y.violet:y.purple,T.fillRect(n,l,d,x),f=t}a?R.html(e.toFixed(1)):B.html(e.toFixed(1))}function n(){(!h||new Date-h>1e3)&&(c(),a=!a,l())}function l(){o||(a&&s++,e(),f=0,D.html(s+1),h=new Date,o=setInterval(function(){t()},100))}function c(){o&&(clearInterval(o),h=null,o=null)}function i(){if(s>-1){c();var t=(d+m)*s,n=0,l=d,i=(v-w)/2;T.clearRect(t,n,l,i),n=(v+w)/2,T.clearRect(t,n,l,i),s--,e(),f=0,a=!1,D.html(s+1),R.html("0.0"),B.html("0.0")}}var r=window.jQuery,o=null,s=-1,a=!1,h=null,u=35,f=0,p=100,d=20,x=5,g=2,m=4,w=2,v=w+(g+x)*u*2+2*(g+x),b=(d+m)*p-m,y={red:"hsl(  0, 80%, 50%)",orange:"hsl( 30, 80%, 50%)",yellow:"hsl( 60, 80%, 50%)",green:"hsl(130, 80%, 50%)",cyan:"hsl(185, 80%, 50%)",blue:"hsl(210, 80%, 50%)",violet:"hsl(265, 80%, 50%)",purple:"hsl(315, 80%, 50%)"},k=r("#canvas"),T=k[0].getContext("2d"),D=r("#breathNo"),R=r("#exhalationTimer"),B=r("#inhalationTimer");k[0].width=b,k[0].height=v,r("#chart").css("height",v+"px"),r("#xAxis").css("height",w+"px").css("margin-top",-w/2+"px"),r("#graticule").css("width",d+"px").css("height",v-2*x+"px").css("border-top",x+"px solid "+y.purple).css("border-bottom",x+"px solid "+y.purple).css("margin-left",-d/2+"px"),e(),r("#switch").click(function(){n()}),r("#stop").click(function(){c()}),r("#back").click(function(){i()}),r(document).keydown(function(e){switch(e.which){case 32:return n(),!1;case 27:return c(),!1;case 8:return i(),!1}})}$(function(){BreathTuner()});