!function(t,e){"use strict";function i(){s(),k=e("#total").find("dd"),B=e("#play").find("dd"),C=e("#pause").find("dd"),L=e("#ratio"),F=e("#lap").find("dd"),K=e("#ckp").find("dd"),H=e("#stats"),I=H.find("tbody"),R=e("#revStatsOrder"),e(t).keydown(function(t){switch(t.which){case 32:return a(),!1;case 9:return c(),!1;case 13:return o(),!1;case 27:return r(),!1}}),e("#stopResetButton").mousedown(r),e("#lapButton").mousedown(o),e("#ckpButton").mousedown(c),e("#playPauseButton").mousedown(a),R.click(u)}function s(){w=P=b=A=0,D=M=T=0,S=!1,f="fresh"}function n(){d(new Date),p=setTimeout(n,100)}function d(e,i,s){var n,d,a,c,o,r,u,p,D,M,T,S;"playing"==f?(n=e-h,a=e-m+w,o=P,u=e-v+b,D=e-g+A):"paused"==f?(n=e-h,a=w,o=e-y+P,u=b,D=A):"fresh"==f&&(n=a=o=u=D=0),d=l(n),c=l(a),r=l(o),p=l(u),M=l(D),k.html(d.slice(0,-2)),B.html(c.slice(0,-2)),t.title=c.slice(0,-4),C.html(r.slice(0,-2)),L.html(Math.round(100*a/n||100)+"%"),F.html(p.slice(0,-2)),K.html(M.slice(0,-2)),i&&(T=e.getFullYear()+"-"+("0"+e.getMonth()).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3),S="<tr class="+i+"><td>"+T+"</td><td>"+i+(s?" "+s:"")+"</td><td>"+M+"</td><td>"+p+"</td><td>"+c+"</td><td>"+r+"</td><td>"+d+"</td></tr>","paused"!=f||"CKP"!=i&&"LAP"!=i?I.prepend(S):I.find("tr:first").after(S))}function l(t){var e,i,s;return e=Math.floor(t/36e5),t%=36e5,i=Math.floor(t/6e4),t%=6e4,s=t/1e3,i=("0"+i).slice(-2),s=("0"+s.toFixed(3)).slice(-6),e+":"+i+":"+s}function a(){if("stopped"!=f){var t=new Date;"fresh"==f?(h=m=v=g=t,H.css("visibility","visible"),d(t,"START"),f="playing"):"playing"==f?(clearTimeout(p),d(t,"PAUSE",++D),w+=t-m,b+=t-v,A+=t-g,y=t,f="paused"):"paused"==f&&(clearTimeout(p),d(t,"PLAY"),P+=t-y,m=v=g=t,S=!1,f="playing"),n()}}function c(){if("fresh"!=f&&"stopped"!=f&&("paused"!=f||0!==A)){var t=new Date;"playing"==f?d(t,"CKP",++T):"paused"==f&&d(y,"CKP",++T),A=0,g=t,d(t)}}function o(){if("fresh"!=f&&"stopped"!=f&&S!==!0){var t=new Date;"playing"==f?d(t,"LAP",++M):"paused"==f&&b>0?(0===A&&I.find("tr:nth-child(2)").remove(),d(y,"LAP",++M)):"paused"==f&&0===b&&(M--,I.find("tr:nth-child(2)").addClass("cancelled"),S=!0),b=A=0,v=g=t,T=0,d(t)}}function r(){var e=new Date;"playing"==f||"paused"==f?(clearTimeout(p),d(e,"FINISH"),R.css("visibility","visible"),f="stopped"):"stopped"==f&&(k.html("0:00:00.0"),B.html("0:00:00.0"),t.title="0:00:00",C.html("0:00:00.0"),L.html("100%"),F.html("0:00:00.0"),K.html("0:00:00.0"),R.css("visibility","hidden"),H.css("visibility","hidden"),I.empty(),s())}function u(){var t=I.find("tr").get();I.empty();for(var e=t.length-1;e>=0;e--)I.append(t[e])}var p,f,h,m,y,v,g,w,P,b,A,D,M,T,S,k,B,C,L,F,K,H,I,R;e(i)}(document,jQuery);