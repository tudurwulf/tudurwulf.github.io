!function(e,t){"use strict";function i(){var i,s;n(),i=t("#timers"),s=t("#buttons"),S=i.find("#total").find("dd"),j=i.find("#play").find("dd"),x=i.find("#pause").find("dd"),H=i.find("#ratio"),O=i.find("#lap").find("dd"),P=i.find("#ckp").find("dd"),Q=t("#stats"),R=Q.find("tbody"),U=t("#revStatsOrder"),t(e).keydown(function(e){switch(e.which){case 32:return a(),!1;case 9:return c(),!1;case 13:return r(),!1;case 27:return p(),!1}}),s.find("#stopReset").mousedown(p),s.find("#lap").mousedown(r),s.find("#ckp").mousedown(c),s.find("#playPause").mousedown(a),U.click(o)}function n(){w=b=k=D=0,M=T=C=0,F=!1,u="fresh"}function s(){d(new Date),f=setTimeout(s,100)}function d(t,i,n){var s,d,a,c,r,p,o,f,M,T,C,F;"playing"==u?(s=t-h,a=t-m+w,r=b,o=t-v+k,M=t-g+D):"paused"==u?(s=t-h,a=w,r=t-y+b,o=k,M=D):"fresh"==u&&(s=a=r=o=M=0),d=l(s),c=l(a),p=l(r),f=l(o),T=l(M),S.html(d.slice(0,-2)),j.html(c.slice(0,-2)),e.title=c.slice(0,-4),x.html(p.slice(0,-2)),H.html(Math.round(100*a/s||100)+"%"),O.html(f.slice(0,-2)),P.html(T.slice(0,-2)),i&&(C=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3),F="<tr class="+i+"><td>"+C+"</td><td>"+i.toUpperCase()+(n?" "+n:"")+"</td><td>"+T+"</td><td>"+f+"</td><td>"+c+"</td><td>"+p+"</td><td>"+d+"</td></tr>","paused"!=u||"ckp"!=i&&"lap"!=i?R.prepend(F):R.find("tr:first").after(F))}function l(e){var t,i,n;return t=Math.floor(e/36e5),e%=36e5,i=Math.floor(e/6e4),e%=6e4,n=e/1e3,i=("0"+i).slice(-2),n=("0"+n.toFixed(3)).slice(-6),t+":"+i+":"+n}function a(){if("stopped"!=u){var e=new Date;"fresh"==u?(h=m=v=g=e,Q.css("visibility","visible"),d(e,"start"),u="playing"):"playing"==u?(clearTimeout(f),d(e,"pause",++M),w+=e-m,k+=e-v,D+=e-g,y=e,u="paused"):"paused"==u&&(clearTimeout(f),d(e,"play"),b+=e-y,m=v=g=e,F=!1,u="playing"),s()}}function c(){if("fresh"!=u&&"stopped"!=u&&("paused"!=u||0!==D)){var e=new Date;"playing"==u?d(e,"ckp",++C):"paused"==u&&d(y,"ckp",++C),D=0,g=e,d(e)}}function r(){if("fresh"!=u&&"stopped"!=u&&F!==!0){var e=new Date;"playing"==u?d(e,"lap",++T):"paused"==u&&k>0?(0===D&&R.find("tr:nth-child(2)").remove(),d(y,"lap",++T)):"paused"==u&&0===k&&(T--,R.find("tr:nth-child(2)").addClass("cancelled"),F=!0),k=D=0,v=g=e,C=0,d(e)}}function p(){var t=new Date;"playing"==u||"paused"==u?(clearTimeout(f),d(t,"finish"),U.css("visibility","visible"),u="stopped"):"stopped"==u&&(S.html("0:00:00.0"),j.html("0:00:00.0"),e.title="0:00:00",x.html("0:00:00.0"),H.html("100%"),O.html("0:00:00.0"),P.html("0:00:00.0"),U.css("visibility","hidden"),Q.css("visibility","hidden"),R.empty(),n())}function o(){var e=R.find("tr").get();R.empty();for(var t=e.length-1;t>=0;t--)R.append(e[t])}var f,u,h,m,y,v,g,w,b,k,D,M,T,C,F,S,j,x,H,O,P,Q,R,U;t(i)}(document,jQuery);