!function(t,e){"use strict";function i(){s(),L=e("#total").find("dd"),M=e("#play").find("dd"),S=e("#pause").find("dd"),k=e("#ratio"),B=e("#lap").find("dd"),E=e("#ckp").find("dd"),H=e("#stats"),I=H.find("tbody"),K=e("#revStatsOrder"),e(t).keydown(function(t){switch(t.which){case 32:return a(),!1;case 9:return c(),!1;case 13:return o(),!1;case 27:return r(),!1}}),e("#stopResetButton").mousedown(r),e("#lapButton").mousedown(o),e("#ckpButton").mousedown(c),e("#playPauseButton").mousedown(a),K.click(u)}function s(){P=w=T=b=0,A=C=O=0,D=!1,f="fresh"}function n(){d(new Date),p=setTimeout(n,100)}function d(e,i,s){var n,d,a,c,o,r,u,p,A,O,D,H,K;"playing"==f?(n=e-h,a=e-m+P,o=w,u=e-v+T,A=e-g+b):"paused"==f?(n=e-h,a=P,o=e-y+w,u=T,A=b):"fresh"==f&&(n=a=o=u=A=0),d=l(n),c=l(a),r=l(o),p=l(u),O=l(A),L.html(d.slice(0,-2)),M.html(c.slice(0,-2)),t.title=c.slice(0,-4),S.html(r.slice(0,-2)),k.html(Math.round(100*a/n||100)+"%"),B.html(p.slice(0,-2)),E.html(O.slice(0,-2)),i&&(D=e.getFullYear()+"-"+("0"+e.getMonth()).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3),H="STOP"==i&&C>0?"LAP "+ ++C+" / STOP":i+(s?" "+s:""),K="<tr class="+i+"><td>"+D+"</td><td>"+H+"</td><td>"+O+"</td><td>"+p+"</td><td>"+c+"</td><td>"+r+"</td><td>"+d+"</td></tr>","paused"!=f||"CHECKPOINT"!=i&&"LAP"!=i?I.prepend(K):I.find("tr:first").after(K))}function l(t){var e,i,s;return e=Math.floor(t/36e5),t%=36e5,i=Math.floor(t/6e4),t%=6e4,s=t/1e3,i=("0"+i).slice(-2),s=("0"+s.toFixed(3)).slice(-6),e+":"+i+":"+s}function a(){if("stopped"!=f){var t=new Date;"fresh"==f?(h=m=v=g=t,H.css("visibility","visible"),d(t,"PLAY"),f="playing"):"playing"==f?(clearTimeout(p),d(t,"PAUSE",++A),P+=t-m,T+=t-v,b+=t-g,y=t,f="paused"):"paused"==f&&(clearTimeout(p),d(t,"PLAY"),w+=t-y,m=v=g=t,D=!1,f="playing"),n()}}function c(){if("fresh"!=f&&"stopped"!=f&&("paused"!=f||0!==b)){var t=new Date;"playing"==f?d(t,"CHECKPOINT",++O):"paused"==f&&d(y,"CHECKPOINT",++O),b=0,g=t,d(t)}}function o(){if("fresh"!=f&&"stopped"!=f&&D!==!0){var t=new Date;"playing"==f?d(t,"LAP",++C):"paused"==f&&T>0?(0===b&&I.find("tr:nth-child(2)").remove(),d(y,"LAP",++C)):"paused"==f&&0===T&&(C--,I.find("tr:nth-child(2)").addClass("cancelled"),D=!0),T=b=0,v=g=t,O=0,d(t)}}function r(){var e=new Date;"playing"==f||"paused"==f?(clearTimeout(p),d(e,"STOP"),K.css("visibility","visible"),f="stopped"):"stopped"==f&&(L.html("0:00:00.0"),M.html("0:00:00.0"),t.title="0:00:00",S.html("0:00:00.0"),k.html("100%"),B.html("0:00:00.0"),E.html("0:00:00.0"),K.css("visibility","hidden"),H.css("visibility","hidden"),I.empty(),s())}function u(){var t=I.find("tr").get();I.empty();for(var e=t.length-1;e>=0;e--)I.append(t[e])}var p,f,h,m,y,v,g,P,w,T,b,A,C,O,D,L,M,S,k,B,E,H,I,K;e(i)}(document,jQuery);