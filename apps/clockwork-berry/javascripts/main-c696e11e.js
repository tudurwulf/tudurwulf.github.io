!function(t,e){"use strict";function i(){s(),S=e("#total").find("dd"),k=e("#play").find("dd"),B=e("#pause").find("dd"),C=e("#ratio"),K=e("#lap").find("dd"),O=e("#ckp").find("dd"),Y=e("#stats"),F=Y.find("tbody"),j=e("#revStatsOrder"),e(t).keydown(function(t){switch(t.which){case 32:return a(),!1;case 9:return c(),!1;case 13:return o(),!1;case 27:return r(),!1}}),e("#stopResetButton").mousedown(r),e("#lapButton").mousedown(o),e("#ckpButton").mousedown(c),e("#playPauseButton").mousedown(a),j.click(u)}function s(){P=w=b=A=0,D=L=M=0,T=!1,f="fresh"}function n(){d(new Date),p=setTimeout(n,100)}function d(e,i,s){var n,d,a,c,o,r,u,p,D,M,T,Y,j;"playing"==f?(n=e-h,a=e-m+P,o=w,u=e-v+b,D=e-g+A):"paused"==f?(n=e-h,a=P,o=e-y+w,u=b,D=A):"fresh"==f&&(n=a=o=u=D=0),d=l(n),c=l(a),r=l(o),p=l(u),M=l(D),S.html(d.slice(0,-2)),k.html(c.slice(0,-2)),t.title=c.slice(0,-4),B.html(r.slice(0,-2)),C.html(Math.round(100*a/n||100)+"%"),K.html(p.slice(0,-2)),O.html(M.slice(0,-2)),i&&(T=e.getFullYear()+"-"+("0"+e.getMonth()).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3),Y="STOP"==i&&L>0?"LAP "+ ++L:i+(s?" "+s:""),j="<tr class="+i+"><td>"+T+"</td><td>"+Y+"</td><td>"+M+"</td><td>"+p+"</td><td>"+c+"</td><td>"+r+"</td><td>"+d+"</td></tr>","paused"!=f||"CKP"!=i&&"LAP"!=i?F.prepend(j):F.find("tr:first").after(j))}function l(t){var e,i,s;return e=Math.floor(t/36e5),t%=36e5,i=Math.floor(t/6e4),t%=6e4,s=t/1e3,i=("0"+i).slice(-2),s=("0"+s.toFixed(3)).slice(-6),e+":"+i+":"+s}function a(){if("stopped"!=f){var t=new Date;"fresh"==f?(h=m=v=g=t,Y.css("visibility","visible"),d(t,"PLAY"),f="playing"):"playing"==f?(clearTimeout(p),d(t,"PAUSE",++D),P+=t-m,b+=t-v,A+=t-g,y=t,f="paused"):"paused"==f&&(clearTimeout(p),d(t,"PLAY"),w+=t-y,m=v=g=t,T=!1,f="playing"),n()}}function c(){if("fresh"!=f&&"stopped"!=f&&("paused"!=f||0!==A)){var t=new Date;"playing"==f?d(t,"CKP",++M):"paused"==f&&d(y,"CKP",++M),A=0,g=t,d(t)}}function o(){if("fresh"!=f&&"stopped"!=f&&T!==!0){var t=new Date;"playing"==f?d(t,"LAP",++L):"paused"==f&&b>0?(0===A&&F.find("tr:nth-child(2)").remove(),d(y,"LAP",++L)):"paused"==f&&0===b&&(L--,F.find("tr:nth-child(2)").addClass("cancelled"),T=!0),b=A=0,v=g=t,M=0,d(t)}}function r(){var e=new Date;"playing"==f||"paused"==f?(clearTimeout(p),d(e,"STOP"),j.css("visibility","visible"),f="stopped"):"stopped"==f&&(S.html("0:00:00.0"),k.html("0:00:00.0"),t.title="0:00:00",B.html("0:00:00.0"),C.html("100%"),K.html("0:00:00.0"),O.html("0:00:00.0"),j.css("visibility","hidden"),Y.css("visibility","hidden"),F.empty(),s())}function u(){var t=F.find("tr").get();F.empty();for(var e=t.length-1;e>=0;e--)F.append(t[e])}var p,f,h,m,y,v,g,P,w,b,A,D,L,M,T,S,k,B,C,K,O,Y,F,j;e(i)}(document,jQuery);